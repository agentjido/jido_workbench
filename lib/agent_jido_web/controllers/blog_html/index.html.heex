<.marketing_layout current_path="/blog" show_nav_modals={false}>
  <div class="container max-w-[1000px] mx-auto px-6 py-12">
    <h1 class="text-3xl font-bold mb-8 text-foreground">Listing all posts</h1>

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
      <div class="lg:col-span-3">
        <%= for post <- @posts do %>
          <div class="bg-card rounded-lg mb-8 overflow-hidden border border-border">
            <div class="p-6">
              <h2 class="text-2xl font-bold mb-2">
                <a
                  href={~p"/blog/#{post.id}"}
                  class="text-primary hover:opacity-80 transition-opacity"
                >
                  {post.title}
                </a>
              </h2>
              <div class="text-muted-foreground mb-3">
                by {post.author} â€¢ {format_date(post.date)}
              </div>
              <div class="prose prose-sm max-w-none mb-4 text-muted-foreground">
                <%= if post.description do %>
                  <p>{post.description}</p>
                <% else %>
                  <p>{preview(post.body)}</p>
                <% end %>
              </div>
              <div class="flex flex-wrap gap-2">
                <%= for tag <- post.tags do %>
                  <a
                    href={~p"/blog/tags/#{tag}"}
                    class="inline-block bg-elevated rounded-full px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"
                  >
                    {tag}
                  </a>
                <% end %>
              </div>
              <div class="mt-4">
                <a
                  href={~p"/blog/#{post.id}"}
                  class="inline-flex items-center px-4 py-2 bg-primary text-primary-foreground hover:opacity-90 rounded-md transition-opacity text-sm font-medium"
                >
                  Read More
                </a>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <div class="lg:col-span-1">
        <div class="sticky top-24 bg-card rounded-lg p-6 border border-border">
          <h2 class="text-xl font-bold mb-4 text-foreground">Search</h2>
          <form action={~p"/blog/search"} method="get" class="mb-6">
            <div class="flex flex-col gap-2">
              <input
                type="text"
                name="q"
                placeholder="Search..."
                class="w-full px-3 py-2 bg-elevated border border-border rounded-md text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
              />
              <button
                type="submit"
                class="w-full px-4 py-2 bg-primary text-primary-foreground hover:opacity-90 rounded-md transition-opacity font-medium text-sm"
              >
                Search
              </button>
            </div>
            <div class="mt-2 text-xs text-muted-foreground">
              Powered by DuckDuckGo
            </div>
          </form>

          <h2 class="text-xl font-bold mb-4 text-foreground">Follow us</h2>
          <div class="flex gap-4 mb-6">
            <a
              href="https://github.com/agentjido/jido"
              class="text-muted-foreground hover:text-foreground transition-colors"
            >
              <AgentJidoWeb.Jido.Nav.github_icon class="w-6 h-6" />
            </a>
            <a
              href="https://x.com/agentjido"
              class="text-muted-foreground hover:text-foreground transition-colors"
            >
              <AgentJidoWeb.Jido.Nav.x_icon class="w-6 h-6" />
            </a>
          </div>

          <h2 class="text-xl font-bold mb-4 text-foreground">Tags</h2>
          <div class="flex flex-wrap gap-2">
            <%= for tag <- @tags do %>
              <a
                href={~p"/blog/tags/#{tag}"}
                class="inline-block bg-elevated rounded-full px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"
              >
                {tag}
              </a>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</.marketing_layout>
